let e;function t(e){return e&&e.__esModule?e.default:e}var i={};Object.defineProperty(i,"__esModule",{value:!0}),i.vdom=i.render=i.shallowEqual=i.isFunctionalNode=i.isTextNode=i.isClassNode=i.isIntrinsicNode=i.createComponentKey=i.createChildKey=i.VDom=i.ClassComponent=void 0;class s{constructor(){this.props={},this.children=[],this.vdom=void 0,this.vdomKey="",this.prevRenderedResult=!1,this.unmounting=!1}onMount(){}onUnmount(e){e()}hasChanged(e){return!i.shallowEqual(this.props,e)}internalRender(e,t){return this.props=e,this.children=t,this.render()}forceUpdate(){if(!this.vdom)return;let e=this.rootDomNode();e&&this.vdom.renderDom(e.parentElement,this.render(),this.vdomKey)}rootDomNode(){if(!this.vdom)return null;let e=this.vdom.vdomData[this.vdomKey];return e?e.domNode:null}}i.ClassComponent=s;class r{constructor(e){this.vdomData={},this.nsStack=[],this.rootKey="R",this.processChildNode=e=>"object"==typeof e?e:this.createTextNode(e.toString()),this.doc=e}render(e,t,i){this.nsStack=[],this.renderDom(t,e,i||this.rootKey)}createVDom(e,t,...i){let r=i.flat(1/0).filter(e=>void 0!=e&&"boolean"!=typeof e).map(this.processChildNode);if(t=t||{},"string"==typeof e)return this.createIntrinsicNode(e,t,r);if(e.prototype instanceof s)return this.createClassNode(e,t,r);if("function"==typeof e)return this.createFunctionalNode(e,t,r);throw Error("Unknown virtual node type")}clear(){this.deleteVDomData(this.vdomData[this.rootKey],this.rootKey),this.vdomData={},this.nsStack=[]}createTextNode(e){return{textValue:e}}createIntrinsicNode(e,t,i){let s={},r={},n={},l={};for(let e in t){let i=t[e];o(e,i)?r[e.substr(2)]=i:a(e)?n[e]=i:"style"===e?l=i:"key"===e||(s[e]=i)}return{children:i,nodeName:e,attributes:s,style:l,listeners:r,key:t.key,properties:n}}createClassNode(e,t,i){let s=t.key;return{children:i,ctor:e,props:t=l(t),key:s}}createFunctionalNode(e,t,i){let s=t.key;return{children:i,func:e,props:t=l(t),key:s}}renderDom(e,t,s){let r=this.vdomData[s];return this.hasVElementChanged(null==r?void 0:r.vNode,t)&&this.deleteVDomData(r,s),!!t&&(i.isTextNode(t)?this.renderTextNode(r,e,t,s):i.isClassNode(t)?this.renderClassNode(r,e,t,s):i.isFunctionalNode(t)?this.renderFunctionalNode(e,t,s):!!i.isIntrinsicNode(t)&&this.renderIntrinsicNode(r,e,t,s))}deleteVDomData(e,t){if(e){if(i.isIntrinsicNode(e.vNode)){let s=e.vNode.children;for(let e=0;e<s.length;e++){let r=i.createChildKey(s[e],t,e),o=this.vdomData[r];this.deleteVDomData(o,r)}}else if(i.isFunctionalNode(e.vNode)||i.isClassNode(e.vNode)){let s=i.createComponentKey(t),r=this.vdomData[s];if(i.isClassNode(e.vNode)){let t=e.instance;t.unmounting=!0,t.onUnmount(()=>{t.unmounting&&this.deleteVDomData(r,s)})}else this.deleteVDomData(r,s)}n(e.domNode),delete this.vdomData[t]}}hasVElementChanged(e,t){return!!e&&(!t||(i.isFunctionalNode(e)?e.func!==t.func:i.isClassNode(e)?e.ctor!==t.ctor:!!i.isIntrinsicNode(e)&&e.nodeName!==t.nodeName))}renderTextNode(e,t,i,s){if(e)e.vNode.textValue!==i.textValue&&(e.domNode.nodeValue=i.textValue,this.vdomData[s]={domNode:e.domNode,vNode:i});else{let e=this.doc.createTextNode(i.textValue);t.appendChild(e),this.vdomData[s]={domNode:e,vNode:i}}return!0}renderFunctionalNode(e,t,s){let r=i.createComponentKey(s),o=this.renderDom(e,t.func(t.props,t.children),r);return this.vdomData[s]={vNode:t},o}renderClassNode(e,t,s,r){let o=null==e?void 0:e.instance,a=!o;if(o){if(!o.hasChanged(s.props))return o.prevRenderedResult}else(o=new s.ctor).vdomKey=i.createComponentKey(r),o.vdom=this;let n=o.internalRender(s.props,s.children),l=!1;return n&&(l=this.renderDom(t,n,o.vdomKey)),o.prevRenderedResult=l,this.vdomData[r]={vNode:s,instance:o},(a||o.unmounting)&&(o.unmounting=!1,o.onMount()),l}renderIntrinsicNode(e,t,i,s){var r;let o;let a=null==e?void 0:e.vNode,l=null===(r=i.attributes)||void 0===r?void 0:r.xmlns;if(l&&this.nsStack.push(l),e&&a.nodeName===i.nodeName)o=e.domNode;else{e&&n(e.domNode);let s=this.nsStack[this.nsStack.length-1];o=s?this.doc.createElementNS(s,i.nodeName):this.doc.createElement(i.nodeName),t.appendChild(o)}return this.vdomData[s]={domNode:o,vNode:i},this.renderChildrenNodes(a,o,i,s),this.applyAttributes(o,null==a?void 0:a.attributes,i.attributes),this.applyStyle(o,null==a?void 0:a.style,i.style),this.applyEventListeners(o,null==a?void 0:a.listeners,i.listeners),this.applyProperties(o,null==a?void 0:a.properties,i.properties),l&&this.nsStack.pop(),!0}getChildWithDomNode(e,t){let s=i.isFunctionalNode(e)||i.isClassNode(e)?this.vdomData[i.createComponentKey(t)]:this.vdomData[t];if(s)return!s.domNode&&(i.isFunctionalNode(s.vNode)||i.isClassNode(s.vNode))?this.getChildWithDomNode(s.vNode,i.createComponentKey(t)):s.domNode}renderChildrenNodes(e,t,s,r){let o=null==e?void 0:e.children,a={},n=[];if(o)for(let e=0;e<o.length;e++){let t=o[e],s=i.createChildKey(t,r,e);a[s]=t,n[e]=this.vdomData[s]}let l=t.childNodes;for(let e=0,o=0;e<s.children.length;e++,o++){let n=s.children[e],h=i.createChildKey(n,r,e),d=this.renderDom(t,n,h);if(delete a[h],!d){o--;continue}let u=this.getChildWithDomNode(n,h);u&&l.item(o)!==u&&t.insertBefore(u,l.item(o))}for(let e in a){let t=this.vdomData[e];this.deleteVDomData(t,e)}}applyAttributes(e,t,i){let s=this.diffProps(t,i);for(let t in s.remove)e.removeAttribute(t);for(let t in s.add)e.setAttribute(t,s.add[t]);return s}applyStyle(e,t,i){let s=this.diffProps(t,i);for(let t in s.remove)e.style.removeProperty(t);for(let t in s.add)e.style.setProperty(t,s.add[t]);return s}applyEventListeners(e,t,i){let s=this.diffProps(t,i);for(let t in s.remove)e.removeEventListener(t,s.remove[t]);for(let t in s.add)e.addEventListener(t,s.add[t]);return s}applyProperties(e,t,i){let s=this.diffProps(t,i);for(let t in s.remove)e[t]=void 0;for(let t in s.add)e[t]=s.add[t];return s}diffProps(e,t={}){let i=Object.assign({},e),s={};for(let e in t){let r=i[e],o=t[e];void 0!=r&&r===o?delete i[e]:s[e]=o}return{remove:i,add:s}}}i.VDom=r;const o=(e,t)=>e.startsWith("on")&&"function"==typeof t,a=e=>"value"===e||"checked"===e||"selected"===e,n=e=>{var t;e&&(null===(t=e.parentElement)||void 0===t||t.removeChild(e))},l=e=>(void 0!==e.key&&(e={...e},delete e.key),e);function h(e){return()=>({isMobile:e})}function d(e){return()=>({selectedPageId:e})}function u(e){return()=>({darkTheme:e})}function c(e){return()=>({fluidEnabled:e})}function m(){return()=>({documentReady:!0})}i.createChildKey=(e,t,s)=>{if(!i.isTextNode(e)){let i=e.key;if(void 0!=i)return`${t}_:${i}`}return`${t}_${s}`},i.createComponentKey=e=>`${e}_C`,i.isIntrinsicNode=e=>!!e.nodeName,i.isClassNode=e=>!!e.ctor,i.isTextNode=e=>!!e.textValue,i.isFunctionalNode=e=>!!e.func,i.shallowEqual=(e,t)=>{if(e===t)return!0;let i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(let s=0;s<i.length;s++)if(e[i[s]]!==t[i[s]])return!1;return!0},i.render=function(e,t,i){r.current.render(e,t,i)},i.vdom=function(e,t,...i){return r.current.createVDom(e,t,...i)},"undefined"!=typeof document&&(r.current=new r(document));const p={npm:"has-fill",github:"fill-on-hover has-stroke",cog:"fill-on-hover has-stroke",youtube:"fill-on-hover has-stroke",fluid:"has-fill",theme:"theme-icon has-stroke",itchio:"fill-on-hover has-stroke"},g="http://www.w3.org/2000/svg",v="0 0 512 512";class f extends i.ClassComponent{render(){let{icon:e,size:t,active:s,disabled:r}=this.props,o={};"number"==typeof t&&isFinite(t)&&(o.width=o.height=`${t}px`);let a=`icon ${this.props.class||""} ${p[e]||""} ${s?"active":""}`;return"theme"===e?/*#__PURE__*/(0,i.vdom)(b,{class:a}):/*#__PURE__*/(0,i.vdom)("svg",{xmlns:g,style:o,viewBox:v,class:a},/*#__PURE__*/(0,i.vdom)("use",{href:`#${e}`}),r&&/*#__PURE__*/(0,i.vdom)(y,null))}}class b extends i.ClassComponent{render(){let e=this.props.class;return e?.includes("active")?setTimeout(()=>this.gotoMoon()):setTimeout(()=>this.gotoSun()),/*#__PURE__*/(0,i.vdom)("svg",{class:e||"",xmlns:g,viewBox:v},/*#__PURE__*/(0,i.vdom)("g",null,/*#__PURE__*/(0,i.vdom)("animateTransform",{class:"begin-animation",attributeName:"transform",type:"rotate",dur:"0.5",repeatCount:"1",fill:"freeze",calcMode:"spline",begin:"indefinite",keySplines:"0.7 0 0.3 1",values:"0 256 512 ; 180 256 512"}),/*#__PURE__*/(0,i.vdom)("animateTransform",{class:"end-animation",attributeName:"transform",type:"rotate",dur:"0.5",repeatCount:"1",fill:"freeze",calcMode:"spline",begin:"indefinite",keySplines:"0.7 0 0.3 1",values:"180 256 512 ; 360 256 512"}),/*#__PURE__*/(0,i.vdom)("path",{d:"m319 897.73c68-40 92-128 53-197-40-69-128-92-197-53-23 13-42 33-55 57 57-31 138-12 171 44 32 56 23 132-48 168 26.6.1 52-5 76-19z","stroke-linecap":"round","stroke-linejoin":"round"}),/*#__PURE__*/(0,i.vdom)("circle",{cx:"256",cy:"256",r:"88"}),/*#__PURE__*/(0,i.vdom)("g",{"stroke-linecap":"round"},/*#__PURE__*/(0,i.vdom)("path",{d:"m395 116.85-46 46"}),/*#__PURE__*/(0,i.vdom)("path",{d:"m452 256h-65"}),/*#__PURE__*/(0,i.vdom)("path",{d:"m395 395-46-46"}),/*#__PURE__*/(0,i.vdom)("path",{d:"m256 452v-65"}),/*#__PURE__*/(0,i.vdom)("path",{d:"m116 116 46 46"}),/*#__PURE__*/(0,i.vdom)("path",{d:"m59 256h65"}),/*#__PURE__*/(0,i.vdom)("path",{d:"m116 395 46-46"}),/*#__PURE__*/(0,i.vdom)("path",{d:"m256 59v65"}))))}constructor(...e){super(...e),this.gotoMoon=()=>{let e=this.rootDomNode()?.parentElement?.querySelector(".begin-animation");e&&e.beginElement()},this.gotoSun=()=>{let e=this.rootDomNode()?.parentElement?.querySelector(".end-animation");e&&e.beginElement()}}}class y extends i.ClassComponent{onMount(){let e=this.rootDomNode();e&&(this.path=e.querySelector("path"),"undefined"==typeof window?this.path?.classList.add("mounted"):setTimeout(()=>this.path?.classList.add("mounted"),50))}onUnmount(e){if(!this.path){e();return}this.path?.classList.remove("mounted"),this.path?.classList.add("unmounted"),setTimeout(e,300)}render(){return/*#__PURE__*/(0,i.vdom)("svg",{xmlns:g,viewBox:v},/*#__PURE__*/(0,i.vdom)("path",{class:"disabled-icon",d:"M60,60 L452,452",stroke:"#a50505","stroke-width":"36"}))}constructor(...e){super(...e),this.path=null}}class x extends i.ClassComponent{render(){return/*#__PURE__*/(0,i.vdom)("svg",{xmlns:g,style:{display:"none"}},/*#__PURE__*/(0,i.vdom)("defs",null,/*#__PURE__*/(0,i.vdom)("g",{id:"github"},/*#__PURE__*/(0,i.vdom)("path",{d:"m256.04 40.719a12.101 12.101 0 01-.0586.002c-122.18 0-221.01 98.821-221.01 221.04 0 97.422 62.943 179.91 150.26 209.4.38186.0493.69175.0942.87891.10156-.003-3.4698-.11415-15.222-.20508-25.107-27.464 2.7336-47.158-5.0022-59.33-15.113-14.232-11.822-18.799-26.721-18.799-26.721l.32618.9375c-4.7106-11.964-10.209-19.009-14.23-23.041-4.0218-4.0316-5.541-4.543-5.541-4.543a12.101 12.101 0 01-1.6855-.96289c-6.1107-4.173-10.297-7.152-13.012-13.621-1.3576-3.2345-1.7567-8.1312-.04883-12.045 1.7079-3.9138 4.5608-6.0923 6.7617-7.3457 4.4017-2.5068 7.6019-2.7105 10.174-2.9941 2.572-.28365 4.7051-.25391 4.7051-.25391a12.101 12.101 0 01.69727.0293c30.762 2.1653 45.461 30.27 45.461 30.27l-.1543-.26953c8.7038 14.91 17.877 18.479 27.371 19.326 6.9177.61754 14.097-.96515 19.641-2.8203 1.117-4.7619 2.5325-9.1837 4.332-13.15-20.939-4.0467-41.963-11.405-59.438-26.117-22.933-19.308-37.99-51.035-37.99-98.162 0-25.618 8.5952-47.73 22.586-65.25-3.4062-12.042-6.7793-34.8 4.5508-63.455a12.101 12.101 0 017.5586-7.0742s3.2924-.90645 6.8887-1.0723 8.4788.0901 14.646 1.3887c11.453 2.4114 27.524 8.7025 48.361 22.156 18.177-4.5474 37.226-6.9097 56.203-7.0059a12.101 12.101 0 01.13476 0c18.951.11661 37.987 2.4616 56.186 7.0059 20.822-13.453 36.88-19.742 48.324-22.154 6.1631-1.2988 11.042-1.5566 14.637-1.3906 3.5946.16595 6.8867 1.0742 6.8867 1.0742a12.101 12.101 0 017.5508 7.0625c11.354 28.646 7.9789 51.431 4.5938 63.453 14.015 17.535 22.549 39.66 22.549 65.262 0 47.236-15.086 78.97-38.08 98.221-17.459 14.616-38.446 21.904-59.361 25.895 4.2183 9.2458 6.8164 20.618 6.8164 34.104 0 31.009-.2792 55.947-.2832 63.49.20492-.0115.50996-.0576.93555-.11914 87.287-29.535 150.2-111.97 150.2-209.39 0-122.2-98.794-221-220.99-221.04z"})),/*#__PURE__*/(0,i.vdom)("g",{id:"npm"},/*#__PURE__*/(0,i.vdom)("path",{d:"M227.6 213.1H256v57.1h-28.4z"}),/*#__PURE__*/(0,i.vdom)("path",{d:"M0 156v171.4h142.2V356H256v-28.6h256V156zm142.2 142.9h-28.4v-85.7H85.3v85.7H28.4V184.6h113.8zm142.2 0h-56.9v28.6h-56.9V184.6h113.8zm199.2 0h-28.4v-85.7h-28.4v85.7h-28.4v-85.7H370v85.7h-56.9V184.6h170.7v114.3z"})),/*#__PURE__*/(0,i.vdom)("g",{id:"youtube"},/*#__PURE__*/(0,i.vdom)("path",{d:"m254.76 102.98s-35.734-.00038-75.871 1.1914-86.398 4.2719-100.17 7.9629a12.791 12.791 0 01-.0098.004c-15.311 4.091-27.437 16.217-31.529 31.529a12.791 12.791 0 01-.002.008c-4.2204 15.748-6.7922 43.226-7.9727 66.02-1.1805 22.793-1.1816 41.16-1.1816 41.16s-.000768 18.366 1.1797 41.158c1.1805 22.793 3.7538 50.27 7.9746 66.021a12.791 12.791 0 01.0039.008c4.0921 15.312 16.216 27.437 31.529 31.529a12.791 12.791 0 01.0078.004c13.772 3.6901 60.032 6.7707 100.17 7.9629 40.137 1.1922 75.869 1.1914 75.869 1.1914s35.732.00073 75.869-1.1914c40.137-1.1921 86.398-4.2726 100.17-7.9629a12.791 12.791 0 01.008-.004c15.313-4.092 27.434-16.214 31.527-31.529a12.791 12.791 0 010-.006c4.219-15.75 6.7936-43.228 7.9746-66.021 1.181-22.794 1.1816-41.16 1.1816-41.16s-.00086-18.365-1.1816-41.158c-1.1808-22.793-3.7547-50.27-7.9746-66.021a12.791 12.791 0 010-.008c-4.0936-15.313-16.214-27.439-31.525-31.529a12.791 12.791 0 01-.01-.004c-13.77-3.691-60.031-6.7711-100.17-7.9629-40.137-1.1918-75.871-1.1914-75.871-1.1914zm-45.533 66.229a12.791 12.791 0 016.0176 1.707l119.26 68.859a12.791 12.791 0 010 22.152l-119.26 68.857a12.791 12.791 0 01-19.186-11.076v-137.72a12.791 12.791 0 0113.168-12.783z"})),/*#__PURE__*/(0,i.vdom)("g",{id:"cog"},/*#__PURE__*/(0,i.vdom)("path",{d:"m210.06 28.039-11.908 75.131c-16.509 6.2627-31.895 15.159-45.559 26.342l-71.063-27.27-45.938 79.566 59.236 47.979c-1.474 8.6613-2.2473 17.427-2.3125 26.213.02275 8.8217.75954 17.627 2.2031 26.33l-59.127 47.889 45.938 79.566 71.084-27.279c13.66 11.122 29.029 19.962 45.51 26.18l11.934 75.303h91.875l11.912-75.16c16.5-6.2589 31.877-15.146 45.535-26.32l71.08 27.277 45.939-79.564-59.24-47.982c1.4765-8.6688 2.2511-17.443 2.3164-26.236-.0227-8.814-.75818-17.612-2.1992-26.307l59.123-47.885-45.939-79.566-71.061 27.27c-13.667-11.131-29.045-19.978-45.537-26.199l-11.93-75.275zm45.938 171.23c31.331.00055 56.729 25.398 56.73 56.729-.00055 31.331-25.399 56.729-56.73 56.73-31.331-.00055-56.729-25.399-56.73-56.73.00056-31.331 25.399-56.728 56.73-56.729z"})),/*#__PURE__*/(0,i.vdom)("g",{id:"fluid"},/*#__PURE__*/(0,i.vdom)("path",{d:"m102 257c0 86 70 156 156 156 28.0.3 83-10 34-10-81.1 0-146-65-146-146.1 0-81 65-146 146-146 65 3-19-22-66-9-41 5-124 69-124 155zm94-64.1c-10 15-22 56-6 24 30-41 96-60 143-38 50 29 67 93 38 143-23 31 10-1 19-17 30-53 12-121-40-152-16-9-41.123-16-65-15-35 0-75 20-89 55zm123 17c30 30 30 79 0 110-30 30-79 30-110 0-17-22 1 8 9 16 32 32 84 32 117 0 32-32 33.085-81 1-114-10.143-14-34-29-17-12z"})),/*#__PURE__*/(0,i.vdom)("g",{id:"itchio"},/*#__PURE__*/(0,i.vdom)("path",{d:"m 288.7065,167.07092 c -8.74939,15.40025 -26.1218,27.33651 -47.22431,27.31617 -0.51643,0 -1.03333,-0.0245 -1.54976,-0.0385 h -0.0135 c -4.65502,0.13827 -33.37081,-0.1542 -48.77984,-27.27572 l -0.006,0.006 c -2.8123,4.90244 -17.30534,27.3123 -47.22622,27.3123 -16.31841,0.014 -35.77405,-7.60553 -46.889311,-27.08513 l -0.01202,0.008 c -11.226185,19.724 -39.440301,30.65762 -52.78802,26.0725 -6.271238,82.85929 -16.313374,178.32476 16.723909,253.69056 74.393232,17.34624 283.527752,17.35476 357.957482,0 33.14731,-59.66078 20.0887,-218.63224 16.72197,-253.6944 -13.50153,4.63793 -41.52495,-6.28692 -52.78994,-26.0725 l -0.012,-0.008 c -11.19214,19.59927 -30.71776,27.09889 -46.88739,27.08324 -29.92908,0 -44.42611,-22.43302 -47.22622,-27.31424 z m -129.88512,58.48266 0.004,10e-4 h -0.004 l -0.004,0.0154 h 0.027 c 14.31414,0.0309 27.02925,-10e-4 42.78488,17.19367 12.39983,-1.30032 25.35822,-1.94843 38.32619,-1.92903 h 0.009 c 12.96796,-0.0167 25.9265,0.62863 38.32812,1.92903 15.7556,-17.19711 28.47071,-17.1654 42.78487,-17.19367 h 0.0251 l -10e-4,-0.0173 c 6.76273,0 33.81451,-7.3e-4 52.66481,52.94204 l 20.24889,72.6307 c 15.00399,54.03137 -4.80487,55.35282 -29.51279,55.40047 -36.64194,-1.36386 -56.93097,-27.974 -56.93097,-54.58035 -20.28295,3.324 -43.94436,4.98632 -67.60602,4.98809 h -0.009 c -23.66342,0 -47.32679,-1.66409 -67.60794,-4.98809 0,26.60635 -20.28886,53.21649 -56.92906,54.58035 -24.707918,-0.0476 -44.514862,-1.36735 -29.510848,-55.40047 l 20.252728,-72.62879 c 18.84764,-52.93534 45.8935,-52.94204 52.66096,-52.94204 z m 82.1888,46.43974 c -0.0188,0.0148 -33.08021,30.37666 -39.02401,41.17598 l 21.64991,-0.86707 v 18.8803 c 0,0.88391 8.68702,0.52317 17.38401,0.12054 h 0.0112 c 8.69396,0.4026 17.38236,0.76335 17.38236,-0.12054 v -18.8803 l 21.65157,0.86707 c -5.94532,-10.79932 -39.05374,-41.17598 -39.05374,-41.17598 z"}),/*#__PURE__*/(0,i.vdom)("path",{d:"m 71.686584,12.932078 c -0.963531,0.572098 -59.367317,35.466355 -59.367317,88.056252 0,24.73796 23.123371,46.4806 44.118132,46.4806 25.209299,0 46.213351,-20.89269 46.215201,-45.69002 0,24.79733 20.28398,45.69002 45.49514,45.69002 25.21302,0 44.84562,-20.89269 44.84562,-45.69002 0,24.79733 21.56821,45.69002 46.77934,45.69002 h 0.45655 c 25.21302,0 46.78121,-20.89269 46.78121,-45.69002 0,24.79733 19.63444,45.69002 44.84376,45.69002 25.21115,0 45.49515,-20.89269 45.49515,-45.69002 0,24.79733 21.00774,45.69002 46.2152,45.69002 20.99475,0 44.11812,-21.73893 44.11812,-46.4806 0,-52.604403 -58.42679,-87.50008 -59.36359,-88.056252 -151.02027,-5.3024611 -323.58087,-1.137475 -336.636235,0 z"}))))}}class w extends i.ClassComponent{render(){let{icon:e,text:t,active:s,disableIcon:r,disabled:o}=this.props,a=`circle-button ${o?"disabled":""}`;return/*#__PURE__*/(0,i.vdom)("div",{class:a,onclick:this.onClick},/*#__PURE__*/(0,i.vdom)("span",{class:"circle-button__text"},t),/*#__PURE__*/(0,i.vdom)(f,{class:"circle-button__icon",icon:e,size:32,active:s,disabled:r}))}constructor(...e){super(...e),this.onClick=()=>{this.props.disabled||"function"!=typeof this.props.onclick||this.props.onclick()}}}class T extends i.ClassComponent{render(){let e=`menu ${this.props.class||""} ${this.showMenu?"active":""}`,t=`menu__row ${this.showMenu?"":"disabled"}`;return/*#__PURE__*/(0,i.vdom)("div",{class:e},/*#__PURE__*/(0,i.vdom)(w,{onclick:this.toggleMenu,icon:"cog",active:this.showMenu}),/*#__PURE__*/(0,i.vdom)("div",{class:"menu__dropdown"},this.children.map((e,s)=>{let r=s+1;this.showMenu||(r=this.children.length-r);let o={"transition-delay":.1*r+"s"};return/*#__PURE__*/(0,i.vdom)("div",{class:t,style:o},e)})))}constructor(...e){super(...e),this.showMenu=!1,this.toggleMenu=()=>{this.showMenu=!this.showMenu,this.forceUpdate()}}}class S extends i.ClassComponent{render(){let{darkTheme:e,fluidEnabled:t}=this.props;return/*#__PURE__*/(0,i.vdom)(T,null,/*#__PURE__*/(0,i.vdom)(w,{icon:"theme",text:`${e?"Light":"Dark"} Theme`,onclick:this.toggleDarkTheme,active:e}),/*#__PURE__*/(0,i.vdom)(w,{icon:"fluid",text:t?"Fluid Off":"Fluid On",disableIcon:!t,onclick:this.toggleFluid}))}constructor(...t){super(...t),this.toggleDarkTheme=()=>{e.execute(u(!this.props.darkTheme))},this.toggleFluid=()=>{e.execute(c(!this.props.fluidEnabled))}}}class D extends i.ClassComponent{render(){let{page:e,active:t}=this.props;return/*#__PURE__*/(0,i.vdom)("a",{class:`navbar-page-button ${t?"is--active":""}`,href:`/${e.id}`,onclick:this.onClick},e.title)}constructor(...e){super(...e),this.onClick=e=>{0===e.button&&(e.preventDefault(),e.stopPropagation()),this.props.onClick(this.props.page)}}}class E extends i.ClassComponent{render(){let{pages:e,selectedPageId:t,darkTheme:s,fluidEnabled:r}=this.props;return/*#__PURE__*/(0,i.vdom)("nav",{class:"navbar"},/*#__PURE__*/(0,i.vdom)("h1",null,"Alan Lawrey"),/*#__PURE__*/(0,i.vdom)("div",{class:"navbar__page-buttons"},e.map(e=>/*#__PURE__*/(0,i.vdom)(D,{active:e.id===t,page:e,onClick:this.onClickPage}))),/*#__PURE__*/(0,i.vdom)(S,{darkTheme:s,fluidEnabled:r}))}constructor(...e){super(...e),this.onClickPage=e=>{this.props.onPageChange(e)}}}class R extends i.ClassComponent{render(){return/*#__PURE__*/(0,i.vdom)("footer",{class:"footer container"},"Alan Lawrey 2024")}}var P={};Object.defineProperty(P,"__esModule",{value:!0}),P.default=class{constructor(){this.listeners=[],this.length=()=>this.listeners.length}add(e){return this.listeners.push(e),()=>{let t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}}trigger(e){for(let t of this.listeners)if(!1===t(e))break}};const A=new/*@__PURE__*/(t(P)),k=new/*@__PURE__*/(t(P));class C extends i.ClassComponent{render(){let{url:e,fullSizeUrl:t,caption:s}=this.props.picture,r=/*#__PURE__*/(0,i.vdom)("img",{loading:"lazy",src:e,alt:s});return/*#__PURE__*/(0,i.vdom)("div",{class:"post-picture",onmouseenter:this.onMouseEnter,onmouseleave:this.onMouseLeave},t?/*#__PURE__*/(0,i.vdom)("a",{href:t,target:"_blank"},r):r,s&&/*#__PURE__*/(0,i.vdom)("div",{class:"post-picture__caption"},s))}constructor(...e){super(...e),this.onMouseEnter=e=>{let t=e.target;A.trigger(t)},this.onMouseLeave=e=>{let t=e.target;k.trigger(t)}}}class _ extends i.ClassComponent{render(){let{url:e,icon:t,title:s}=this.props.link,r={};return s&&(r.title=s),/*#__PURE__*/(0,i.vdom)("div",{class:"post-link"},/*#__PURE__*/(0,i.vdom)("a",{href:e,target:"_blank",...r},/*#__PURE__*/(0,i.vdom)(f,{icon:t})))}}const F=/(\[([^\]]+)\]\(([^\)]+)\))/,U=RegExp(F,"g");class N{static processText(e){if(0>e.indexOf("["))return[e];let t=[],s=e.split(U);for(let e=0;e<s.length;e++){let r=s[e];if(r){if("["===r[0]&&F.test(r)){let r=s[e+1],o=s[e+2];if(e+=2,"link"===r){let e=o.split("|"),s=e[0].trim(),r=e[1].trim();t.push(/*#__PURE__*/(0,i.vdom)("a",{href:r},s))}else if("post-header"===r){let e=o.split("|"),s=e[0].trim(),r=e[1].trim();t.push(/*#__PURE__*/(0,i.vdom)("div",{class:"post-header"},/*#__PURE__*/(0,i.vdom)("h3",null,s)," ",/*#__PURE__*/(0,i.vdom)("small",null,r)))}else("strong"===r||"h1"===r||"h2"===r||"h3"===r)&&t.push((0,i.vdom)(r,{},o))}else t.push(r)}}return t}}class M extends i.ClassComponent{render(){let{text:e,pictures:t,list:s,picturePosition:r,links:o}=this.props.content;return/*#__PURE__*/(0,i.vdom)("div",{class:`post-paragraph is--${r||"right"}`},(e||s||o)&&/*#__PURE__*/(0,i.vdom)("div",{class:"post-paragraph__text-content"},this.processText(),o&&/*#__PURE__*/(0,i.vdom)("div",{class:"post-paragraph__links"},o.map(e=>/*#__PURE__*/(0,i.vdom)(_,{link:e})))),t&&/*#__PURE__*/(0,i.vdom)("div",{class:"post-paragraph__pictures"},t.map(e=>/*#__PURE__*/(0,i.vdom)(C,{picture:e}))))}constructor(...e){super(...e),this.processText=()=>{let{text:e}=this.props.content;if(!e)return null;let t=[],s=null;for(let r of e)0!==r.length&&("*"===r[0]?(null===s&&(s=[]),s.push(r.substr(1).trimLeft())):(null!==s&&(t.push(this.createList(s)),s=null),t.push(/*#__PURE__*/(0,i.vdom)("div",{class:"post-paragraph__line"},N.processText(r)))));return null!==s&&t.push(this.createList(s)),t},this.createList=e=>/*#__PURE__*/(0,i.vdom)("ul",null,e.map(e=>/*#__PURE__*/(0,i.vdom)("li",null,N.processText(e))))}}class L extends i.ClassComponent{render(){let{contents:e}=this.props.post;return/*#__PURE__*/(0,i.vdom)("div",{class:"post"},/*#__PURE__*/(0,i.vdom)("div",null,e.map(e=>/*#__PURE__*/(0,i.vdom)(M,{content:e}))))}}class B extends i.ClassComponent{onMount(){let t=this.rootDomNode();t&&("undefined"==typeof window?t.classList.add("mounted"):setTimeout(()=>{var i;t.classList.add("mounted");let s=t.getBoundingClientRect();e.execute((i=s.height,()=>({postsHeight:i})))},50))}onUnmount(e){let t=this.rootDomNode();if(!t){e();return}t.classList.remove("mounted"),t.classList.add("unmounted"),setTimeout(()=>e(),300)}render(){let{posts:e,category:t}=this.props;return/*#__PURE__*/(0,i.vdom)("div",{class:"posts"},/*#__PURE__*/(0,i.vdom)("div",{class:"posts__content"},t&&/*#__PURE__*/(0,i.vdom)("h2",null,t.title),e&&e.map(e=>/*#__PURE__*/(0,i.vdom)(L,{key:e.pageId,post:e})),/*#__PURE__*/(0,i.vdom)(R,null)))}}class I extends i.ClassComponent{render(){let{pages:e,selectedPageId:t}=this.props;return/*#__PURE__*/(0,i.vdom)("nav",{class:"mobile-bottom-navbar"},/*#__PURE__*/(0,i.vdom)("div",{class:"mobile-bottom-navbar__page-buttons"},e.map(e=>/*#__PURE__*/(0,i.vdom)(D,{active:e.id===t,page:e,onClick:this.onClickPage}))))}constructor(...e){super(...e),this.onClickPage=e=>{this.props.onPageChange(e)}}}class z extends i.ClassComponent{render(){let{darkTheme:e,fluidEnabled:t}=this.props;return/*#__PURE__*/(0,i.vdom)("div",{class:"mobile-top-navbar"},/*#__PURE__*/(0,i.vdom)("h1",null,"Alan Lawrey"),/*#__PURE__*/(0,i.vdom)(S,{darkTheme:e,ripplesEnabled:t}))}}class V{static generateColor(e,t){let i,s;if(e.length>0){let t=Math.floor(Math.random()*e.length),r=e[t],o=V.HEXtoHSV(r);i=o.h,s=o.s}else i=Math.random(),s=1;let r=V.HSVtoRGB(i,s,t);return r.r*=.15,r.g*=.15,r.b*=.15,r}static HEXtoHSV(e){let t=parseInt((e=e.replace("#","")).substring(0,2),16)/255,i=parseInt(e.substring(2,4),16)/255,s=parseInt(e.substring(4,6),16)/255,r=Math.max(t,i,s),o=Math.min(t,i,s);return{h:(r===o?0:r===t?((i-s)/(r-o)+6)%6:r===i?(s-t)/(r-o)+2:(t-i)/(r-o)+4)/6,s:0===r?0:(r-o)/r,v:r}}static HEXtoRGB(e){return{r:parseInt((e=e.replace("#","")).substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}}static HSVtoRGB(e,t,i){let s=0,r=0,o=0,a=Math.floor(6*e),n=6*e-a,l=i*(1-t),h=i*(1-n*t),d=i*(1-(1-n)*t);switch(a%6){case 0:s=i,r=d,o=l;break;case 1:s=h,r=i,o=l;break;case 2:s=l,r=i,o=d;break;case 3:s=l,r=h,o=i;break;case 4:s=d,r=l,o=i;break;case 5:s=i,r=l,o=h}return{r:s,g:r,b:o}}static normalizeColor(e){return{r:e.r/255,g:e.g/255,b:e.b/255}}}const O=[];class G{static getUniforms(e,t){let i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<s;r++){let s=t.getActiveUniform(e,r).name;i[s]=t.getUniformLocation(e,s)}return i}static createProgram(e,t,i){let s=i.createProgram();return i.attachShader(s,e),i.attachShader(s,t),i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||console.trace(i.getProgramInfoLog(s)),s}static compileShader(e,t,i,s){i=G.addKeywords(i,s);let r=e.createShader(t);return(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))?r:(console.trace(e.getShaderInfoLog(r)),null)}static addKeywords(e,t){if(null==t)return e;let i="";return t.forEach(e=>{i+="#define "+e+"\n"}),i+e}}class X{constructor(e,t,i){this.gl=i,this.vertexShader=e,this.fragmentShaderSource=t,this.programs=[],this.activeProgram=null,this.uniforms={}}setKeywords(e){let t=0;for(let i of e)t+=this.hashCode(i);let i=this.programs[t];if(null==i){let s=G.compileShader(this.gl,this.gl.FRAGMENT_SHADER,this.fragmentShaderSource,e);i=G.createProgram(this.vertexShader,s,this.gl),this.programs[t]=i}i!=this.activeProgram&&(this.uniforms=G.getUniforms(i,this.gl),this.activeProgram=i)}hashCode(e){if(0===e.length)return 0;let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i)|0;return t}bind(){this.gl.useProgram(this.activeProgram)}}class H{constructor(e,t){this.id=-1,this.texcoordX=0,this.texcoordY=0,this.prevTexcoordX=0,this.prevTexcoordY=0,this.deltaX=0,this.deltaY=0,this.down=!1,this.moved=!1,this.color=V.generateColor(e,t)}updatePointerDownData(e,t,i,s,r,o){this.id=e,this.down=!0,this.moved=!1,this.texcoordX=t/s.width,this.texcoordY=1-i/s.height,this.prevTexcoordX=this.texcoordX,this.prevTexcoordY=this.texcoordY,this.deltaX=0,this.deltaY=0,this.color=V.generateColor(r,o)}updatePointerMoveData(e,t,i,s){this.prevTexcoordX=this.texcoordX,this.prevTexcoordY=this.texcoordY,this.texcoordX=e/i.width,this.texcoordY=1-t/i.height,this.deltaX=this.correctDeltaX(this.texcoordX-this.prevTexcoordX,i),this.deltaY=this.correctDeltaY(this.texcoordY-this.prevTexcoordY,i),s?this.moved=Math.abs(this.deltaX)>0||Math.abs(this.deltaY)>0:this.moved=this.down}updatePointerUpData(){this.down=!1}correctDeltaX(e,t){let i=t.width/t.height;return i<1&&(e*=i),e}correctDeltaY(e,t){let i=t.width/t.height;return i>1&&(e/=i),e}}class j{constructor(e,t,i){this.gl=i,this.uniforms={},this.program=G.createProgram(e,t,i),this.uniforms=G.getUniforms(this.program,i)}bind(){this.gl.useProgram(this.program)}}class Y{constructor(e,t){this.blurProgram=new j(t.blurVertexShader,t.blurShader,e),this.copyProgram=new j(t.baseVertexShader,t.copyShader,e),this.clearProgram=new j(t.baseVertexShader,t.clearShader,e),this.colorProgram=new j(t.baseVertexShader,t.colorShader,e),this.bloomPrefilterProgram=new j(t.baseVertexShader,t.bloomPrefilterShader,e),this.bloomBlurProgram=new j(t.baseVertexShader,t.bloomBlurShader,e),this.bloomFinalProgram=new j(t.baseVertexShader,t.bloomFinalShader,e),this.splatProgram=new j(t.baseVertexShader,t.splatShader,e),this.advectionProgram=new j(t.baseVertexShader,t.advectionShader,e),this.divergenceProgram=new j(t.baseVertexShader,t.divergenceShader,e),this.curlProgram=new j(t.baseVertexShader,t.curlShader,e),this.vorticityProgram=new j(t.baseVertexShader,t.vorticityShader,e),this.pressureProgram=new j(t.baseVertexShader,t.pressureShader,e),this.gradienSubtractProgram=new j(t.baseVertexShader,t.gradientSubtractShader,e)}}class K{constructor(e,t){this.displayShaderSource=`
precision highp float;
precision highp sampler2D;

varying vec2 vUv;
varying vec2 vL;
varying vec2 vR;
varying vec2 vT;
varying vec2 vB;
uniform sampler2D uTexture;
uniform sampler2D uBloom;
uniform sampler2D uDithering;
uniform vec2 ditherScale;
uniform vec2 texelSize;

vec3 linearToGamma (vec3 color) {
    color = max(color, vec3(0));
    return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));
}

void main () {
    vec3 c = texture2D(uTexture, vUv).rgb;

    #ifdef SHADING
    vec3 lc = texture2D(uTexture, vL).rgb;
    vec3 rc = texture2D(uTexture, vR).rgb;
    vec3 tc = texture2D(uTexture, vT).rgb;
    vec3 bc = texture2D(uTexture, vB).rgb;

    float dx = length(rc) - length(lc);
    float dy = length(tc) - length(bc);

    vec3 n = normalize(vec3(dx, dy, length(texelSize)));
    vec3 l = vec3(0.0, 0.0, 1.0);

    float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);
    c *= diffuse;
    #endif

    #ifdef BLOOM
    vec3 bloom = texture2D(uBloom, vUv).rgb;
    float noise = texture2D(uDithering, vUv * ditherScale).r;
    noise = noise * 2.0 - 1.0;
    bloom += noise / 255.0;
    bloom = linearToGamma(bloom);
    c += bloom;
    #endif

    float a = max(c.r, max(c.g, c.b));
    gl_FragColor = vec4(c, a);
}
    `,this.baseVertexShader=G.compileShader(e,e.VERTEX_SHADER,`
precision highp float;

attribute vec2 aPosition;
varying vec2 vUv;
varying vec2 vL;
varying vec2 vR;
varying vec2 vT;
varying vec2 vB;
uniform vec2 texelSize;

void main () {
    vUv = aPosition * 0.5 + 0.5;
    vL = vUv - vec2(texelSize.x, 0.0);
    vR = vUv + vec2(texelSize.x, 0.0);
    vT = vUv + vec2(0.0, texelSize.y);
    vB = vUv - vec2(0.0, texelSize.y);
    gl_Position = vec4(aPosition, 0.0, 1.0);
}
`),this.blurVertexShader=G.compileShader(e,e.VERTEX_SHADER,`
precision highp float;

attribute vec2 aPosition;
varying vec2 vUv;
varying vec2 vL;
varying vec2 vR;
uniform vec2 texelSize;

void main () {
    vUv = aPosition * 0.5 + 0.5;
    float offset = 1.33333333;
    vL = vUv - texelSize * offset;
    vR = vUv + texelSize * offset;
    gl_Position = vec4(aPosition, 0.0, 1.0);
}
`),this.blurShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;
precision mediump sampler2D;

varying vec2 vUv;
varying vec2 vL;
varying vec2 vR;
uniform sampler2D uTexture;

void main () {
    vec4 sum = texture2D(uTexture, vUv) * 0.29411764;
    sum += texture2D(uTexture, vL) * 0.35294117;
    sum += texture2D(uTexture, vR) * 0.35294117;
    gl_FragColor = sum;
}
`),this.copyShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;
precision mediump sampler2D;

varying highp vec2 vUv;
uniform sampler2D uTexture;

void main () {
    gl_FragColor = texture2D(uTexture, vUv);
}
`),this.clearShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;
precision mediump sampler2D;

varying highp vec2 vUv;
uniform sampler2D uTexture;
uniform float value;

void main () {
    gl_FragColor = value * texture2D(uTexture, vUv);
}
`),this.colorShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;

uniform vec4 color;

void main () {
    gl_FragColor = color;
}
`),this.bloomPrefilterShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;
precision mediump sampler2D;

varying vec2 vUv;
uniform sampler2D uTexture;
uniform vec3 curve;
uniform float threshold;

void main () {
    vec3 c = texture2D(uTexture, vUv).rgb;
    float br = max(c.r, max(c.g, c.b));
    float rq = clamp(br - curve.x, 0.0, curve.y);
    rq = curve.z * rq * rq;
    c *= max(rq, br - threshold) / max(br, 0.0001);
    gl_FragColor = vec4(c, 0.0);
}
`),this.bloomBlurShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;
precision mediump sampler2D;

varying vec2 vL;
varying vec2 vR;
varying vec2 vT;
varying vec2 vB;
uniform sampler2D uTexture;

void main () {
    vec4 sum = vec4(0.0);
    sum += texture2D(uTexture, vL);
    sum += texture2D(uTexture, vR);
    sum += texture2D(uTexture, vT);
    sum += texture2D(uTexture, vB);
    sum *= 0.25;
    gl_FragColor = sum;
}
`),this.bloomFinalShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;
precision mediump sampler2D;

varying vec2 vL;
varying vec2 vR;
varying vec2 vT;
varying vec2 vB;
uniform sampler2D uTexture;
uniform float intensity;

void main () {
    vec4 sum = vec4(0.0);
    sum += texture2D(uTexture, vL);
    sum += texture2D(uTexture, vR);
    sum += texture2D(uTexture, vT);
    sum += texture2D(uTexture, vB);
    sum *= 0.25;
    gl_FragColor = sum * intensity;
}
`),this.splatShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision highp float;
precision highp sampler2D;

varying vec2 vUv;
uniform sampler2D uTarget;
uniform float aspectRatio;
uniform vec3 color;
uniform vec2 point;
uniform float radius;

void main () {
    vec2 p = vUv - point.xy;
    p.x *= aspectRatio;
    vec3 splat = exp(-dot(p, p) / radius) * color;
    vec3 base = texture2D(uTarget, vUv).xyz;
    gl_FragColor = vec4(base + splat, 1.0);
}
`),this.advectionShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision highp float;
precision highp sampler2D;

varying vec2 vUv;
uniform sampler2D uVelocity;
uniform sampler2D uSource;
uniform vec2 texelSize;
uniform vec2 dyeTexelSize;
uniform float dt;
uniform float dissipation;

vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {
    vec2 st = uv / tsize - 0.5;

    vec2 iuv = floor(st);
    vec2 fuv = fract(st);

    vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);
    vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);
    vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);
    vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);

    return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);
}

void main () {
#ifdef MANUAL_FILTERING
    vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;
    vec4 result = bilerp(uSource, coord, dyeTexelSize);
#else
    vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;
    vec4 result = texture2D(uSource, coord);
#endif
    float decay = 1.0 + dissipation * dt;
    gl_FragColor = result / decay;
}`,t.supportLinearFiltering?null:["MANUAL_FILTERING"]),this.divergenceShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;
precision mediump sampler2D;

varying highp vec2 vUv;
varying highp vec2 vL;
varying highp vec2 vR;
varying highp vec2 vT;
varying highp vec2 vB;
uniform sampler2D uVelocity;

void main () {
    float L = texture2D(uVelocity, vL).x;
    float R = texture2D(uVelocity, vR).x;
    float T = texture2D(uVelocity, vT).y;
    float B = texture2D(uVelocity, vB).y;

    vec2 C = texture2D(uVelocity, vUv).xy;
    if (vL.x < 0.0) { L = -C.x; }
    if (vR.x > 1.0) { R = -C.x; }
    if (vT.y > 1.0) { T = -C.y; }
    if (vB.y < 0.0) { B = -C.y; }

    float div = 0.5 * (R - L + T - B);
    gl_FragColor = vec4(div, 0.0, 0.0, 1.0);
}
`),this.curlShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;
precision mediump sampler2D;

varying highp vec2 vUv;
varying highp vec2 vL;
varying highp vec2 vR;
varying highp vec2 vT;
varying highp vec2 vB;
uniform sampler2D uVelocity;

void main () {
    float L = texture2D(uVelocity, vL).y;
    float R = texture2D(uVelocity, vR).y;
    float T = texture2D(uVelocity, vT).x;
    float B = texture2D(uVelocity, vB).x;
    float vorticity = R - L - T + B;
    gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);
}
`),this.vorticityShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision highp float;
precision highp sampler2D;

varying vec2 vUv;
varying vec2 vL;
varying vec2 vR;
varying vec2 vT;
varying vec2 vB;
uniform sampler2D uVelocity;
uniform sampler2D uCurl;
uniform float curl;
uniform float dt;

void main () {
    float L = texture2D(uCurl, vL).x;
    float R = texture2D(uCurl, vR).x;
    float T = texture2D(uCurl, vT).x;
    float B = texture2D(uCurl, vB).x;
    float C = texture2D(uCurl, vUv).x;

    vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));
    force /= length(force) + 0.0001;
    force *= curl * C;
    force.y *= -1.0;

    vec2 velocity = texture2D(uVelocity, vUv).xy;
    velocity += force * dt;
    velocity = min(max(velocity, -1000.0), 1000.0);
    gl_FragColor = vec4(velocity, 0.0, 1.0);
}
`),this.pressureShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;
precision mediump sampler2D;

varying highp vec2 vUv;
varying highp vec2 vL;
varying highp vec2 vR;
varying highp vec2 vT;
varying highp vec2 vB;
uniform sampler2D uPressure;
uniform sampler2D uDivergence;

void main () {
    float L = texture2D(uPressure, vL).x;
    float R = texture2D(uPressure, vR).x;
    float T = texture2D(uPressure, vT).x;
    float B = texture2D(uPressure, vB).x;
    float C = texture2D(uPressure, vUv).x;
    float divergence = texture2D(uDivergence, vUv).x;
    float pressure = (L + R + B + T - divergence) * 0.25;
    gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);
}
`),this.gradientSubtractShader=G.compileShader(e,e.FRAGMENT_SHADER,`
precision mediump float;
precision mediump sampler2D;

varying highp vec2 vUv;
varying highp vec2 vL;
varying highp vec2 vR;
varying highp vec2 vT;
varying highp vec2 vB;
uniform sampler2D uPressure;
uniform sampler2D uVelocity;

void main () {
    float L = texture2D(uPressure, vL).x;
    float R = texture2D(uPressure, vR).x;
    float T = texture2D(uPressure, vT).x;
    float B = texture2D(uPressure, vB).x;
    vec2 velocity = texture2D(uVelocity, vUv).xy;
    velocity.xy -= vec2(R - L, T - B);
    gl_FragColor = vec4(velocity, 0.0, 1.0);
}
`)}}class W{static ditheringTexture(e){return W.createTextureAsync("data:image/png;base64,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",e)}static getTextureScale(e,t,i){return{x:t/e.width,y:i/e.height}}static createTextureAsync(e,t){let i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texImage2D(t.TEXTURE_2D,0,t.RGB,1,1,0,t.RGB,t.UNSIGNED_BYTE,new Uint8Array([255,255,255]));let s={texture:i,width:1,height:1,attach:e=>(t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,i),e)},r=new Image;return r.onload=()=>{s.width=r.width,s.height=r.height,t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE,r)},r.src=e,s}}class q{constructor(e){this.hasStarted=!1,this.simResolution=128,this.dyeResolution=1024,this.captureResolution=512,this.densityDissipation=1,this.velocityDissipation=.2,this.pressure=.8,this.pressureIterations=20,this.curl=30,this.splatRadius=.25,this.splatForce=6e3,this.shading=!0,this.colorful=!0,this.colorUpdateSpeed=10,this.colorPalette=O,this.hover=!0,this.backgroundColor="#000000",this.transparent=!1,this.brightness=.5,this.bloom=!0,this.bloomIterations=8,this.bloomResolution=256,this.bloomIntensity=.8,this.bloomThreshold=.6,this.bloomSoftKnee=.7,this.paused=!1,this.drawWhilePaused=!1,this.pointers=[],this.bloomFramebuffers=[],this.lastUpdateTime=Date.now(),this.colorUpdateTimer=0,this._countdown=0,this.handleMouseDown=e=>{let t=this.scaleByPixelRatio(e.clientX),i=this.scaleByPixelRatio(e.clientY),s=this.pointers.find(e=>-1==e.id);s||(s=new H(this.colorPalette,this.brightness)),s.updatePointerDownData(-1,t,i,this.canvas,this.colorPalette,this.brightness)},this.handleMouseMove=e=>{let t=this.scaleByPixelRatio(e.clientX),i=this.scaleByPixelRatio(e.clientY),s=this.pointers.find(e=>-1==e.id);s||(s=new H(this.colorPalette,this.brightness)),s.updatePointerMoveData(t,i,this.canvas,this.hover)},this.handleMouseUp=()=>{this.hover||this.pointers[0].updatePointerUpData()},this.handleTouchStart=e=>{let t=e.targetTouches;for(;t.length>=this.pointers.length;)this.pointers.push(new H(this.colorPalette,this.brightness));for(let e=0;e<t.length;e++){let i=this.scaleByPixelRatio(t[e].pageX),s=this.scaleByPixelRatio(t[e].pageY);this.pointers[e+1].updatePointerDownData(t[e].identifier,i,s,this.canvas,this.colorPalette,this.brightness)}},this.handleTouchMove=e=>{let t=e.targetTouches;for(let e=0;e<t.length;e++){let i=this.pointers[e+1],s=this.scaleByPixelRatio(t[e].pageX),r=this.scaleByPixelRatio(t[e].pageY);i.updatePointerMoveData(s,r,this.canvas,this.hover)}},this.handleTouchEnd=e=>{for(let t of e.changedTouches){let e=this.pointers.find(e=>e.id===t.identifier);e&&e.updatePointerUpData()}};let t=e.querySelector("canvas");t||(t=document.createElement("canvas"),e.appendChild(t)),this.canvas=t,this.canvas.style.width="100%",this.canvas.style.height="100%",this.resizeCanvas();let{gl:i,ext:s}=this.getWebGLContext();this.gl=i,this.ext=s,this.isMobile()&&(this.dyeResolution/=2),this.ext.supportLinearFiltering||(this.dyeResolution/=2,this.shading=!1,this.bloom=!1);let r=new K(this.gl,this.ext);this.blitInit(),this.ditheringTexture=W.ditheringTexture(this.gl),this.programs=new Y(this.gl,r),this.displayMaterial=new X(r.baseVertexShader,r.displayShaderSource,this.gl),this.update=this.update.bind(this)}start(){this.pointers.push(new H(this.colorPalette,this.brightness)),this.updateKeywords(),this.initFramebuffers(),this.update(),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("touchstart",this.handleTouchStart,{passive:!1,capture:!0}),window.addEventListener("touchmove",this.handleTouchMove,{passive:!1,capture:!0}),window.addEventListener("touchend",this.handleTouchEnd),this.canvas.style.display="",this.lastUpdateTime=Date.now(),this.hasStarted=!0}stop(){this.pointers=[],cancelAnimationFrame(this.animationFrameId),window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),this.canvas.style.display="none",this.hasStarted=!1}scaleByPixelRatio(e){return Math.floor(e*(window.devicePixelRatio||1))}resizeCanvas(){let e=this.scaleByPixelRatio(this.canvas.clientWidth),t=this.scaleByPixelRatio(this.canvas.clientHeight);return(this.canvas.width!=e||this.canvas.height!=t)&&(this.canvas.width=e,this.canvas.height=t,!0)}supportRenderTextureFormat(e,t,i,s){let r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,t,4,4,0,i,s,null);let o=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.checkFramebufferStatus(e.FRAMEBUFFER)==e.FRAMEBUFFER_COMPLETE}getSupportedFormat(e,t,i,s){if(!this.supportRenderTextureFormat(e,t,i,s))switch(t){case e.R16F:return this.getSupportedFormat(e,e.RG16F,e.RG,s);case e.RG16F:return this.getSupportedFormat(e,e.RGBA16F,e.RGBA,s);default:return null}return{internalFormat:t,format:i}}getWebGLContext(){let e,t,i,s,r;let o={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1},a=this.canvas.getContext("webgl2",o),n=!!a;n||(a=this.canvas.getContext("webgl",o)??this.canvas.getContext("experimental-webgl",o)),n?(a.getExtension("EXT_color_buffer_float"),t=a.getExtension("OES_texture_float_linear")):(e=a.getExtension("OES_texture_half_float"),t=a.getExtension("OES_texture_half_float_linear")),a.clearColor(0,0,0,1);let l=n?a.HALF_FLOAT:e?e.HALF_FLOAT_OES:0;return n?(i=this.getSupportedFormat(a,a.RGBA16F,a.RGBA,l),s=this.getSupportedFormat(a,a.RG16F,a.RG,l),r=this.getSupportedFormat(a,a.R16F,a.RED,l)):(i=this.getSupportedFormat(a,a.RGBA,a.RGBA,l),s=this.getSupportedFormat(a,a.RGBA,a.RGBA,l),r=this.getSupportedFormat(a,a.RGBA,a.RGBA,l)),{gl:a,ext:{formatRGBA:i,formatRG:s,formatR:r,halfFloatTexType:l,supportLinearFiltering:t}}}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}updateKeywords(){let e=[];this.shading&&e.push("SHADING"),this.bloom&&e.push("BLOOM"),this.displayMaterial.setKeywords(e)}initFramebuffers(){let e=this.getResolution(this.simResolution),t=this.getResolution(this.dyeResolution),i=this.ext.halfFloatTexType,s=this.ext.formatRGBA,r=this.ext.formatRG,o=this.ext.formatR,a=this.ext.supportLinearFiltering?this.gl.LINEAR:this.gl.NEAREST;this.gl.disable(this.gl.BLEND),this._dye?this._dye=this.resizeDoubleFBO(this._dye,t.width,t.height,s.internalFormat,s.format,i,a):this._dye=this.createDoubleFBO(t.width,t.height,s.internalFormat,s.format,i,a),this._velocity?this._velocity=this.resizeDoubleFBO(this._velocity,e.width,e.height,r.internalFormat,r.format,i,a):this._velocity=this.createDoubleFBO(e.width,e.height,r.internalFormat,r.format,i,a),this._divergence=this.createFBO(e.width,e.height,o.internalFormat,o.format,i,this.gl.NEAREST),this._curl=this.createFBO(e.width,e.height,o.internalFormat,o.format,i,this.gl.NEAREST),this._pressure=this.createDoubleFBO(e.width,e.height,o.internalFormat,o.format,i,this.gl.NEAREST),this.initBloomFramebuffers()}getResolution(e){let t=this.gl.drawingBufferWidth/this.gl.drawingBufferHeight;t<1&&(t=1/t);let i=Math.round(e),s=Math.round(e*t);return this.gl.drawingBufferWidth>this.gl.drawingBufferHeight?{width:s,height:i}:{width:i,height:s}}createDoubleFBO(e,t,i,s,r,o){let a=this.createFBO(e,t,i,s,r,o),n=this.createFBO(e,t,i,s,r,o);return{width:e,height:t,texelSizeX:a.texelSizeX,texelSizeY:a.texelSizeY,get read(){return a},set read(value){a=value},get write(){return n},set write(value){n=value},swap(){let e=a;a=n,n=e}}}resizeFBO(e,t,i,s,r,o,a){let n=this.createFBO(t,i,s,r,o,a);return this.programs.copyProgram.bind(),this.gl.uniform1i(this.programs.copyProgram.uniforms.uTexture,e.attach(0)),this.blit(n),n}resizeDoubleFBO(e,t,i,s,r,o,a){return e.width===t&&e.height===i||(e.read=this.resizeFBO(e.read,t,i,s,r,o,a),e.write=this.createFBO(t,i,s,r,o,a),e.width=t,e.height=i,e.texelSizeX=1/t,e.texelSizeY=1/i),e}createFBO(e,t,i,s,r,o){this.gl.activeTexture(this.gl.TEXTURE0);let a=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,o),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,o),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texImage2D(this.gl.TEXTURE_2D,0,i,e,t,0,s,r,null);let n=this.gl.createFramebuffer();this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,a,0),this.gl.viewport(0,0,e,t),this.gl.clear(this.gl.COLOR_BUFFER_BIT);let l=1/e,h=1/t,d=this.gl;return{texture:a,fbo:n,width:e,height:t,texelSizeX:l,texelSizeY:h,attach:e=>(d.activeTexture(d.TEXTURE0+e),d.bindTexture(d.TEXTURE_2D,a),e)}}initBloomFramebuffers(){let e=this.getResolution(this.bloomResolution),t=this.ext.halfFloatTexType,i=this.ext.formatRGBA,s=this.ext.supportLinearFiltering?this.gl.LINEAR:this.gl.NEAREST;this._bloom=this.createFBO(e.width,e.height,i.internalFormat,i.format,t,s),this.bloomFramebuffers.length=0;for(let r=0;r<this.bloomIterations;r++){let o=e.width>>r+1,a=e.height>>r+1;if(o<2||a<2)break;let n=this.createFBO(o,a,i.internalFormat,i.format,t,s);this.bloomFramebuffers.push(n)}}blitInit(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.gl.createBuffer()),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.gl.createBuffer()),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(0,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(0)}blit(e,t=!1){null===e?(this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)):(this.gl.viewport(0,0,e.width,e.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e.fbo)),t&&(this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}splat(e,t,i,s,r){this.programs.splatProgram.bind(),this.gl.uniform1i(this.programs.splatProgram.uniforms.uTarget,this._velocity.read.attach(0)),this.gl.uniform1f(this.programs.splatProgram.uniforms.aspectRatio,this.canvas.width/this.canvas.height),this.gl.uniform2f(this.programs.splatProgram.uniforms.point,e,t),this.gl.uniform3f(this.programs.splatProgram.uniforms.color,i,s,0),this.gl.uniform1f(this.programs.splatProgram.uniforms.radius,this.correctRadius(this.splatRadius/100)),this.blit(this._velocity.write),this._velocity.swap(),this.gl.uniform1i(this.programs.splatProgram.uniforms.uTarget,this._dye.read.attach(0)),this.gl.uniform3f(this.programs.splatProgram.uniforms.color,r.r,r.g,r.b),this.blit(this._dye.write),this._dye.swap(),this._countdown=4}correctRadius(e){let t=this.canvas.width/this.canvas.height;return t>1&&(e*=t),e}update(){let e=this.calcDeltaTime();if(this._countdown-=e,this.resizeCanvas()&&this.initFramebuffers(),this.updateColors(e),this.applyInputs(),this._countdown<=0){this.animationFrameId=requestAnimationFrame(this.update);return}this.paused||this.step(e),this.render(null),this.animationFrameId=requestAnimationFrame(this.update)}calcDeltaTime(){let e=Date.now(),t=(e-this.lastUpdateTime)/1e3;return t=Math.min(t,.016666),this.lastUpdateTime=e,t}updateColors(e){this.colorful&&(this.colorUpdateTimer+=e*this.colorUpdateSpeed,this.colorUpdateTimer>=1&&(this.colorUpdateTimer=this.wrap(this.colorUpdateTimer,0,1),this.pointers.forEach(e=>{e.color=V.generateColor(this.colorPalette,this.brightness)})))}wrap(e,t,i){let s=i-t;return 0==s?t:(e-t)%s+t}applyInputs(){this.pointers.forEach(e=>{e.moved&&(e.moved=!1,this.splatPointer(e))})}splatPointer(e){if(this.paused&&!this.drawWhilePaused)return;let t=e.deltaX*this.splatForce,i=e.deltaY*this.splatForce;this.splat(e.texcoordX,e.texcoordY,t,i,e.color)}step(e){this.gl.disable(this.gl.BLEND),this.programs.curlProgram.bind(),this.gl.uniform2f(this.programs.curlProgram.uniforms.texelSize,this._velocity.texelSizeX,this._velocity.texelSizeY),this.gl.uniform1i(this.programs.curlProgram.uniforms.uVelocity,this._velocity.read.attach(0)),this.blit(this._curl),this.programs.vorticityProgram.bind(),this.gl.uniform2f(this.programs.vorticityProgram.uniforms.texelSize,this._velocity.texelSizeX,this._velocity.texelSizeY),this.gl.uniform1i(this.programs.vorticityProgram.uniforms.uVelocity,this._velocity.read.attach(0)),this.gl.uniform1i(this.programs.vorticityProgram.uniforms.uCurl,this._curl.attach(1)),this.gl.uniform1f(this.programs.vorticityProgram.uniforms.curl,this.curl),this.gl.uniform1f(this.programs.vorticityProgram.uniforms.dt,e),this.blit(this._velocity.write),this._velocity.swap(),this.programs.divergenceProgram.bind(),this.gl.uniform2f(this.programs.divergenceProgram.uniforms.texelSize,this._velocity.texelSizeX,this._velocity.texelSizeY),this.gl.uniform1i(this.programs.divergenceProgram.uniforms.uVelocity,this._velocity.read.attach(0)),this.blit(this._divergence),this.programs.clearProgram.bind(),this.gl.uniform1i(this.programs.clearProgram.uniforms.uTexture,this._pressure.read.attach(0)),this.gl.uniform1f(this.programs.clearProgram.uniforms.value,this.pressure),this.blit(this._pressure.write),this._pressure.swap(),this.programs.pressureProgram.bind(),this.gl.uniform2f(this.programs.pressureProgram.uniforms.texelSize,this._velocity.texelSizeX,this._velocity.texelSizeY),this.gl.uniform1i(this.programs.pressureProgram.uniforms.uDivergence,this._divergence.attach(0));for(let e=0;e<this.pressureIterations;e++)this.gl.uniform1i(this.programs.pressureProgram.uniforms.uPressure,this._pressure.read.attach(1)),this.blit(this._pressure.write),this._pressure.swap();this.programs.gradienSubtractProgram.bind(),this.gl.uniform2f(this.programs.gradienSubtractProgram.uniforms.texelSize,this._velocity.texelSizeX,this._velocity.texelSizeY),this.gl.uniform1i(this.programs.gradienSubtractProgram.uniforms.uPressure,this._pressure.read.attach(0)),this.gl.uniform1i(this.programs.gradienSubtractProgram.uniforms.uVelocity,this._velocity.read.attach(1)),this.blit(this._velocity.write),this._velocity.swap(),this.programs.advectionProgram.bind(),this.gl.uniform2f(this.programs.advectionProgram.uniforms.texelSize,this._velocity.texelSizeX,this._velocity.texelSizeY),this.ext.supportLinearFiltering||this.gl.uniform2f(this.programs.advectionProgram.uniforms.dyeTexelSize,this._velocity.texelSizeX,this._velocity.texelSizeY);let t=this._velocity.read.attach(0);this.gl.uniform1i(this.programs.advectionProgram.uniforms.uVelocity,t),this.gl.uniform1i(this.programs.advectionProgram.uniforms.uSource,t),this.gl.uniform1f(this.programs.advectionProgram.uniforms.dt,e),this.gl.uniform1f(this.programs.advectionProgram.uniforms.dissipation,this.velocityDissipation),this.blit(this._velocity.write),this._velocity.swap(),this.ext.supportLinearFiltering||this.gl.uniform2f(this.programs.advectionProgram.uniforms.dyeTexelSize,this._dye.texelSizeX,this._dye.texelSizeY),this.gl.uniform1i(this.programs.advectionProgram.uniforms.uVelocity,this._velocity.read.attach(0)),this.gl.uniform1i(this.programs.advectionProgram.uniforms.uSource,this._dye.read.attach(1)),this.gl.uniform1f(this.programs.advectionProgram.uniforms.dissipation,this.densityDissipation),this.blit(this._dye.write),this._dye.swap()}render(e){this.bloom&&this.applyBloom(this._dye.read,this._bloom),null!==e&&this.transparent?this.gl.disable(this.gl.BLEND):(this.gl.blendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.enable(this.gl.BLEND)),this.transparent||this.drawColor(e,V.normalizeColor(V.HEXtoRGB(this.backgroundColor))),this.drawDisplay(e)}drawColor(e,t){this.programs.colorProgram.bind(),this.gl.uniform4f(this.programs.colorProgram.uniforms.color,t.r,t.g,t.b,1),this.blit(e)}drawDisplay(e){let t=null===e?this.gl.drawingBufferWidth:e.width,i=null===e?this.gl.drawingBufferHeight:e.height;if(this.displayMaterial.bind(),this.shading&&this.gl.uniform2f(this.displayMaterial.uniforms.texelSize,1/t,1/i),this.gl.uniform1i(this.displayMaterial.uniforms.uTexture,this._dye.read.attach(0)),this.bloom){this.gl.uniform1i(this.displayMaterial.uniforms.uBloom,this._bloom.attach(1)),this.gl.uniform1i(this.displayMaterial.uniforms.uDithering,this.ditheringTexture.attach(2));let e=W.getTextureScale(this.ditheringTexture,t,i);this.gl.uniform2f(this.displayMaterial.uniforms.ditherScale,e.x,e.y)}this.blit(e)}applyBloom(e,t){if(this.bloomFramebuffers.length<2)return;let i=t;this.gl.disable(this.gl.BLEND),this.programs.bloomPrefilterProgram.bind();let s=this.bloomThreshold*this.bloomSoftKnee+1e-4,r=this.bloomThreshold-s;for(let t of(this.gl.uniform3f(this.programs.bloomPrefilterProgram.uniforms.curve,r,2*s,.25/s),this.gl.uniform1f(this.programs.bloomPrefilterProgram.uniforms.threshold,this.bloomThreshold),this.gl.uniform1i(this.programs.bloomPrefilterProgram.uniforms.uTexture,e.attach(0)),this.blit(i),this.programs.bloomBlurProgram.bind(),this.bloomFramebuffers))t&&(this.gl.uniform2f(this.programs.bloomBlurProgram.uniforms.texelSize,i.texelSizeX,i.texelSizeY),this.gl.uniform1i(this.programs.bloomBlurProgram.uniforms.uTexture,i.attach(0)),this.blit(t),i=t);this.gl.blendFunc(this.gl.ONE,this.gl.ONE),this.gl.enable(this.gl.BLEND);for(let e=this.bloomFramebuffers.length-2;e>=0;e--){let t=this.bloomFramebuffers[e];this.gl.uniform2f(this.programs.bloomBlurProgram.uniforms.texelSize,i.texelSizeX,i.texelSizeY),this.gl.uniform1i(this.programs.bloomBlurProgram.uniforms.uTexture,i.attach(0)),this.gl.viewport(0,0,t.width,t.height),this.blit(t),i=t}this.gl.disable(this.gl.BLEND),this.programs.bloomFinalProgram.bind(),this.gl.uniform2f(this.programs.bloomFinalProgram.uniforms.texelSize,i.texelSizeX,i.texelSizeY),this.gl.uniform1i(this.programs.bloomFinalProgram.uniforms.uTexture,i.attach(0)),this.gl.uniform1f(this.programs.bloomFinalProgram.uniforms.intensity,this.bloomIntensity),this.blit(t)}}var J=class{constructor(e=document.body){this.container=e,this.container.style.outline="none",this.container.style.display="flex",this.container.style.justifyContent="center",this.container.style.alignItems="center",this.simulation=new q(e)}start(){this.simulation.hasStarted||this.simulation.start()}stop(){this.simulation.hasStarted&&this.simulation.stop()}togglePause(e=!1){return!!this.simulation.hasStarted&&(this.simulation.paused=!this.simulation.paused,this.simulation.paused&&(this.simulation.drawWhilePaused=e),this.simulation.paused)}setConfig(e){for(let t in e)this.simulation[t]=e[t];this.simulation.hasStarted&&((void 0!==e.dyeResolution||void 0!==e.simResolution)&&this.simulation.initFramebuffers(),(void 0!==e.shading||void 0!==e.bloom)&&this.simulation.updateKeywords())}};class Q extends i.ClassComponent{onMount(){if("undefined"!=typeof window){if(this.rootNode=this.rootDomNode(),this.rootNode){this.fluid=new J(this.rootNode);let e=this.getPalette();this.fluid.setConfig({colorPalette:e,hover:!0,shading:!0,splatRadius:.2,velocityDissipation:1.2,densityDissipation:1.2,pressureIterations:10,bloom:!0,curl:10,simResolution:64,dyeResolution:512,splatForce:1e3,transparent:!0}),this.props.enabled&&this.fluid.start()}this.removeOnHoverOver=A.add(this.onHoverOver),this.removeOnHoverOut=k.add(this.onHoverOut)}}onUnmount(e){this.removeOnHoverOver&&this.removeOnHoverOver(),this.removeOnHoverOut&&this.removeOnHoverOut(),e()}render(){if(this.fluid){if(this.props.enabled){if(this.fluid.start(),this.props.darkTheme!==this.prevDarkTheme){this.prevDarkTheme=this.props.darkTheme;let e=this.getPalette();this.fluid.setConfig({colorPalette:e})}}else this.fluid.stop()}return/*#__PURE__*/(0,i.vdom)("div",{id:"renderSurface",class:"webgl-fluid"})}constructor(...e){super(...e),this.fluid=null,this.rootNode=null,this.removeOnHoverOver=null,this.removeOnHoverOut=null,this.prevDarkTheme=null,this.hoverCount=0,this.getPalette=()=>this.props.darkTheme?this.props.darkColourPalette:this.props.lightColourPalette,this.onHoverOver=e=>{this.fluid&&(this.hoverCount++,this.updateSplatRadius())},this.onHoverOut=e=>{this.fluid&&(this.hoverCount--,this.updateSplatRadius())},this.updateSplatRadius=()=>{let e=this.hoverCount>0?.4:.2,t=this.hoverCount>0?2e3:1e3;this.fluid?.setConfig({splatRadius:e,splatForce:t})}}}let Z=null;const $=["#8946b5","#526977","#a89870"],ee=["#3c1751","#172a2f","#4b261a"],et=e=>{let{pages:t,posts:s,selectedPageId:r,darkTheme:o,isMobile:a,fluidEnabled:n,documentReady:l}=e.state;return void 0==Z&&"undefined"!=typeof window&&(Z=document.querySelector(".app__post-container"),document.body.parentElement),/*#__PURE__*/(0,i.vdom)("div",{class:"app-wrapper"},/*#__PURE__*/(0,i.vdom)(x,null),/*#__PURE__*/(0,i.vdom)("main",{class:"app"},!a&&/*#__PURE__*/(0,i.vdom)(E,{selectedPageId:r,pages:t,onPageChange:ei,darkTheme:o,fluidEnabled:n}),a&&/*#__PURE__*/(0,i.vdom)(z,{darkTheme:o,fluidEnabled:n}),/*#__PURE__*/(0,i.vdom)("div",{class:"container app__post-container"},/*#__PURE__*/(0,i.vdom)(B,{key:r,category:t.find(e=>e.id===r),posts:s[r]})),a&&/*#__PURE__*/(0,i.vdom)(I,{selectedPageId:r,pages:t,onPageChange:ei})),/*#__PURE__*/(0,i.vdom)(Q,{lightColourPalette:$,darkColourPalette:ee,darkTheme:o,enabled:l&&n}))};function ei(t){let i={pageId:t.id};window.history.pushState(i,t.title,`/?page=${t.id}`),e.execute(d(t.id))}var es={};Object.defineProperty(es,"__esModule",{value:!0}),es.EmptyModifier=void 0,es.EmptyModifier=()=>null,es.default=class{constructor(e){this.subscriptions=[],this.state=()=>this.currentState,this.currentState=e}execute(e,t=!0){let i=e(this.currentState);null!=i&&i!==this.currentState&&(this.currentState=Object.assign({},this.currentState,i),this.triggerSubscriptions(e,t))}subscribe(e,t,i,s){let r=e(this.currentState),o={selector:new er(e,r,i,s),subscription:t};return this.subscriptions.push(o),()=>{let e=this.subscriptions.indexOf(o);e>=0&&this.subscriptions.splice(e,1)}}subscribeAny(e,t){return this.subscribe(e=>e,e,void 0,t)}unsubscribeAll(){this.subscriptions=[]}triggerSubscriptions(e,t){for(let i of this.subscriptions){let s=i.selector.getValue(this.currentState);i.selector.checkIfChanged(s)&&i.subscription(this.currentState,s,e,t)}}};class er{constructor(e,t,i,s){this.getValue=e=>this.selector(e),this.selector=e,this.prevValue=t,this.comparer=i,this.name=s}checkIfChanged(e){let t=!1;return t=void 0!==this.comparer?!this.comparer(this.prevValue,e):e!==this.prevValue,this.prevValue=e,t}}const eo=[{id:"about",title:"About",defaultPage:!0},{id:"work",title:"Work"},{id:"projects",title:"Projects"}];let ea="";for(const e of eo)if(e.defaultPage){ea=e.id;break}e=new/*@__PURE__*/(t(es))({pages:eo,posts:function(e){let t={};for(let i of e)(t[i.pageId]||(t[i.pageId]=[])).push(i);return t}([{pageId:"about",contents:[{text:["Software developer from Melbourne Australia.","I'm currently working at [link](Fluent Cargo | https://www.fluentcargo.com/) as a principal software engineer. Primary on data processing and software architecture.","I've previously worked at [link](migenius | https://www.migenius.com/), [link](Rome2rio | https://rome2rio.com) and [link](Metro Trains Melbourne | https://metrotrains.com.au).","You can contact me via [link](email | mailto:alan.lawrey@gmail.com) or find me on [link](Bluesky | https://bsky.app/profile/astrellon.bsky.social), [link](LinkedIn | https://www.linkedin.com/in/alan-lawrey-b7509b21/) or [link](reddit | https://www.reddit.com/user/astrellon3/).","These are the things I enjoy working on:","* Making websites, working on both the frontend and backend.","* Creating tooling for processing data, both the processes and the UI for controlling those processes.","* Mentoring in software development.","* Creating small games. [link](I have a small itch.io page. | https://astrellon.itch.io/)","* Artwork [link](Instagram | https://www.instagram.com/astrellon_art/), [link](Redbubble | https://astrellon.redbubble.com), [link](TeePublic | https://teepublic.com/user/astrellonart) and [link](Society6 | https://society6.com/astrellon_art)."],pictures:[{url:"/assets/alanlawrey2021.jpg",caption:"Me at the beach."}]},{text:["I also like learning about how things are done.","As part of that I've re-created several systems for learning purposes.","This website is an example of that, it is built using my own state management ([link](simple-data-store | https://www.npmjs.com/package/simple-data-store)), virtual dom ([link](simple-tsx-vdom | https://www.npmjs.com/package/simple-tsx-vdom)) with server side rendering and hydration.","The source for this website s [link](here | https://github.com/astrellon/astrellon.github.io).","The background fluid effect is from Michael Brusegard's [link](WebGL Fluid Enhanced | https://github.com/michaelbrusegard/WebGL-Fluid-Enhanced)."]}]},{pageId:"projects",contents:[{text:["[h3](Space Strife)","A chaotic space shooter around defending a planet using tanks!","Main features:","* Alien motherships will be hiding behind gravity sources that you'll have to aim around.","* Supports bullet hell level of projectiles and runs well on lower end hardware.","* Defeating aliens gives you the money needed to buy more tanks or upgrade existing ones.","* Multiple characters that have different abilities such as temporary power ups, projectile splitting and slowing time.","* Works on mobile in landscape and portrait with a slightly different control scheme in each.","* An alpha build of the game is available on [link](itch.io | https://astrellon.itch.io/space-strife)."],links:[{url:"https://www.youtube.com/playlist?list=PLTf8ZRLo3EcM2af7AtxFiqQySnzFKEprt",icon:"youtube",title:"Devloga Playlist"},{url:"https://astrellon.itch.io/space-strife",icon:"itchio",title:"itch.io page for downloading the game."}],pictures:[{url:"/assets/spacestrife-v0.3-easy_small.jpg",caption:"An early level.",fullSizeUrl:"/assets/spacestrife-v0.3-easy.png"},{url:"/assets/spacestrife-v0.3-levelSelect_small.jpg",caption:"The level select screen is a zoomed out 'world view' of each level.",fullSizeUrl:"/assets/spacestrife-v0.3-levelSelect.png"},{url:"/assets/spacestrife-v0.3-hard_small.jpg",caption:"A later level with more going on.",fullSizeUrl:"/assets/spacestrife-v0.3-hard.jpg"}],picturePosition:"left"},{text:["[h3](Lysithea)","A scripting language designed to live inside other systems to glue them together","Main features:","* Lisp style syntax.","* Builtin support for booleans, doubles, strings, lists and key-value-pair objects.","* Conditionals as expressions, use an if or switch statement like a function.","* Virtual machine is very light weight and allows for using many at the same time.","* Script execution can be controlled by the host environment, limit how many code lines can execute at a time.","* Simple code, easy to port to new host systems.","* Ported to C#, C++ and TypeScript. Examples written for Unity.","* Reasonably good performance, compared to other NLua or MoonSharp for C#."],links:[{url:"https://www.npmjs.com/package/lysithea-vm",icon:"npm",title:"NPM Page"},{url:"https://github.com/astrellon/lysithea-vm",icon:"github",title:"Github Repository"},{url:"https://www.youtube.com/watch?v=xeuKEHhp0jc",icon:"youtube",title:"Devlog"}],pictures:[{url:"/assets/lysitheaCode.png",caption:"Example of code in Lysithea",fullSizeUrl:"/assets/lysitheaCode.png"}],picturePosition:"right"},{text:["[h3](Tailspin)","A space game about going on an adventure and exploring space with some smart animal companions.","Main features:","* Flying your own spaceship from the cockpit.","* Walk around the interior of your spaceship and interact with different components.","* Fly around large spaces, past stars, black holes, into nebulae, land on planets and dock with space stations.","* Dock a smaller ship in your larger ship for different away missions.","* Explore space to find old shipwrecks to find salvageable parts.","* Find asteroids to mine for resources that can be used for crafting new parts.","* Be self-sufficient in deep space by looking after your ship.","* Made in Unity 2020","Some of these features are still being worked on, however I am keeping a devlog on YouTube.","It's very ambitious and who knows how far I'll get, but I've already gotten a lot further than I thought I would.","Currently I'm not planning on releasing the source code as it also contains paid for Unity assets."],links:[{url:"https://www.youtube.com/playlist?list=PLTf8ZRLo3EcNqP13W1UTFdxuNUngYzYCV",icon:"youtube",title:"Devlog Playlist"}],pictures:[{url:"/assets/tailspinStarPlanetThumbnail.jpg",caption:"A scene showing a nearby planet and the star at the center of the system.",fullSizeUrl:"/assets/tailspinStarPlanet.jpg"},{url:"/assets/tailspinTractorBeamsThumbnail.jpg",caption:"A ship using it's tractor beams to pull in some rocks that have just been mined from an asteroid.",fullSizeUrl:"/assets/tailspinTractorBeams.jpg"},{url:"/assets/tailspinEquipmentThumbnail.jpg",caption:"An example of a ship engine sitting outside of it's hardpoint before it's installed into the ship.",fullSizeUrl:"/assets/tailspinEquipment.jpg"}],picturePosition:"left"},{text:["[h3](Simple Virtual DOM)","I made my own virtual DOM (simple-tsx-vdom) inspired by [link](React | https://reactjs.org/) and [link](Preact | https://preactjs.com/).","It was created for learning but I wanted to take it to the point where I could build something non-trivial with it so this portfolio is the biggest example of it right now.","You can find the source for this portfolio page on [link](GitHub | https://github.com/astrellon/simple-portfolio).","Main features:","* Small filesize (about 2.5kb after compression) written with no dependencies.","* Written in fairly straight forward TypeScript that is all class based and can be extended.","* TSX support (hence the name, also simple-vdom was taken).","* Optional server-side rendering and client side hydration with the help of two extra packages.","* A simple diffing algorithm to reduce DOM manipulations.","* SVG support","* Supports both class and functional components.","* Supports custom handling of removed elements. For example if an element is removed from the vdom you can control how it's removed from the DOM, such as via animation before it's completely removed.","While I have created this website it in it is definitely [strong](NOT) intended for production use!"],links:[{url:"https://www.npmjs.com/package/simple-tsx-vdom",icon:"npm",title:"NPM Page"},{url:"https://github.com/astrellon/simple-tsx-vdom",icon:"github",title:"Github Repository"}],pictures:[{url:"/assets/simpleTsxVdom.jpg",caption:"A code snippet from this website."}]},{text:["[h3](Simple Data Store)","I like what [link](redux | https://redux.js.org/) and other functional state management libraries have done for UI but I found them too unstructured and too generalised. So I put together my own version that is still general but puts just enough structure to fulfil my needs.","Unlike simple-tsx-vdom I have used simple-data-store in production to good effect, even without the extra features of browser devtools.","Main features:","* Small filesize (about 0.5kb after compression) written with no dependencies.","* Immutable data structures.","* Selector support, similar to reselect for redux."],links:[{url:"https://www.npmjs.com/package/simple-data-store",icon:"npm",title:"NPM Page"},{url:"https://github.com/astrellon/simple-data-store",icon:"github",title:"Github Repository"}],pictures:[{url:"/assets/simpleDataStore.jpg",caption:"An example of a really simple counter store."}],picturePosition:"left"},{text:["[h3](Space Doggo)","A space adventure/exploration game that I've been working on for a while now.","The main goal is to explore space and to find things. The scope is deliberately small so that [strong](hopefully) I'll finish it one day.","Main features:","* Features flying ships, floating around inside ships, teleporting to planets and walking around on planets.","* Uses 'space portals' to view other star systems and seamlessly move between locations without loading screens.","* A compendium of animals and things to fill up that makes use 'live photos' that takes a copy of each object in view so that they can be animated later on.","* Written in C++ using [link](SFML | https://www.sfml-dev.org/) for cross platform support.","* Makes use of [link](Box2D | https://box2d.org/) for physics, and [link](earcut | https://github.com/mapbox/earcut.hpp) for creating polygons for collisions.","* Tile based planets that use [link](tmxlite | https://github.com/fallahn/tmxlite) for loading [link](Tiled | https://www.mapeditor.org/) maps.","* Uses [link](yoga | https://yogalayout.com/) for UI layout and [link](Dear ImGui | https://github.com/ocornut/imgui) for debug UI.","* All data is stored in plain JSON and loaded using [link](nlohmann JSON | https://github.com/nlohmann/json) for parsing.","I've also been keeping a dev log about my progress and uploading them to YouTube."],links:[{url:"https://github.com/astrellon/simple-space",icon:"github",title:"Github Repository"},{url:"https://www.youtube.com/playlist?list=PLTf8ZRLo3EcP7A2US2CpGMTsEW_Kzezx8",icon:"youtube",title:"Devlog Playlist"}],pictures:[{url:"/assets/spaceDoggoShipInteriorThumbnail.jpg",caption:"The inside of a ship that you can pilot along with the dog player.",fullSizeUrl:"/assets/spaceDoggoShipInterior.png"},{url:"/assets/spaceDoggoPortalThumbnail.jpg",caption:"A spaceship near a portal showing what is visible on the other side.",fullSizeUrl:"/assets/spaceDoggoPortal.png"},{url:"/assets/spaceDoggoPlanetSurfaceThumbnail.jpg",caption:"A planet surface with some local birds eating their food next to a nest.",fullSizeUrl:"/assets/spaceDoggoPlanetSurface.png"}],picturePosition:"right"},{text:["[h3](LOSS: Lua Operating SyStem)","A project to create an operating system that's built around using Lua with the intention of being light weight.","The main use case was for a game where you may want many simple in-game operating systems that look like a *NIX shell but without actually running a VM.","Main features:","* A modified version of the Lua VM that supports running multiple Lua States in the same thread using Boost Coroutines","* A virtual file system the supports mounting different types of file systems.","* A [link](tmpfs | https://en.wikipedia.org/wiki/Tmpfs) for virtual files (such as /dev and /proc)","* A persistent file system for long term storage.","* A [link](Fuse | https://en.wikipedia.org/wiki/Filesystem_in_Userspace) implementation that allows for mounting the persistent hard drives and modifying them outside of the VM."],links:[{url:"https://github.com/astrellon/loss",icon:"github",title:"Github Repository"}],pictures:[{url:"/assets/loss.png",caption:"An example of starting the VM with an init.d file that just prints some text.",fullSizeUrl:"/assets/loss.png"}],picturePosition:"left"},{text:["[h3](LOSS v0)","An earlier attempt at creating an OS for use in a game, specifically for a space game. This was a relatively naive approach that used NLua which is a C# implementation of Lua for use in Unity.","Main features:","* Basic shell for running Lua.","* A simple [link](VT100 | https://en.wikipedia.org/wiki/VT100) terminal emulator that used built in Unity components for text rendering.","* A very simple file system, however it did not support mounting."],links:[{url:"https://github.com/astrellon/ScalingOctoDubstep",icon:"github",title:"Github Repository"}],pictures:[{url:"/assets/scalingOctoDubstep_small.jpg",caption:"A screenshot of the UI in Unity.",fullSizeUrl:"/assets/scalingOctoDubstep.png"}],picturePosition:"right"},{text:["[h3](Unity Voxel Engine)","A [strong](small) voxel engine aim at being able to create and edit levels entirely within Unity. It performed well enough for the scale of the levels I wanted to created, however getting the editor tools to behave the way I wanted proved to be the most tricky aspect","Original intended to be in the style of [link](Might and Magic | https://en.wikipedia.org/wiki/Might_and_Magic) series which is why the original repository is called 'mm'","Main features:","* Chunked editing and loading. Maps are stored as individual binary files which is optimised for updating chunks during editing.","* Multiple different shapes beyond a cube such as ramps and different corners to allow for smoother terrain.","* Unity editing support for creating levels without needing additional tools."],links:[{url:"https://github.com/astrellon/mm",icon:"github",title:"Github Repository"}],pictures:[{url:"/assets/mmVoxels_small.png",caption:"A screenshot of the Voxel Engine UI in Unity.",fullSizeUrl:"/assets/mmVoxels.png"}],picturePosition:"left"},{text:["[h3](RPG Game)","A topdown 2D RPG game engine written in C++ built using minimal dependencies for the purpose of learning.","This is a fairly old project now, but it does represent a lot of learning in terms of C++, integrating a scripting language, handling modding, dealing with complex UI and handling an audio system.","Main features:","* Tile based 2D graphics with a tile overlapping system for blending between tiles.","* Sound system that supports streaming OGG and WAV files.","* Lua Bindings for controlling just about every aspect of the game. From how a new game is created and loaded to how a door should behave when interacted with.","* Maps are created through Lua and has a mechanism for determining if the map is being played new or loaded from disk, allowing for map scripts to upgrade old save files.","* A dialogue system based on The Elder Scrolls: Morrowind with topics, keywords and actions bound to those keywords.","* HTML documentation taken from the C++ comments using a Python script.","* In game text uses a simplistic CSS and HTML system for rich text.","* An in game map editor for creating new levels."],links:[{url:"https://github.com/astrellon/rouge",icon:"github",title:"Github Repository"}],pictures:[{url:"/assets/rouge.png",caption:"A screenshot of the RPG game",fullSizeUrl:"/assets/rouge.png"},{url:"/assets/rougeMapEditor.png",caption:"A screenshot of the in game map editor",fullSizeUrl:"/assets/rougeMapEditor.png"}],picturePosition:"right"}]},{pageId:"work",contents:[{text:["[post-header](Fluent Cargo | JAN 2020 - PRESENT)","[link](Fluent Cargo | https://fluentcargo.com) is a multi-modal freight routing solution. ","My work included:","* A content server for processing data from multiple data sources into a unified structure that can then be manipulated further manually.","* A main server for using the processed data for routing and cataloging relationships between the data.","* A frontend for manipulating the data on in the content server.","* Integrate multiple different endpoints for either live data or storing a local copy.","* Hosting on AWS using EC2, load balancers, S3 and CodeBuild."],pictures:[{url:"/assets/fluentCargo_routes_small.jpg",caption:"Different routes available between London, UK and Jeddah, Saudi Arabia.",fullSizeUrl:"/assets/fluentCargo_routes.webp"},{url:"/assets/fluentCargo_schedules_small.jpg",caption:"Ocean schedules between Long Beach, USA and Ningbo, China.",fullSizeUrl:"/assets/fluentCargo_schedules.webp"},{url:"/assets/fluentCargo_ports_small.jpg",caption:"Ports that are directly connected to Halifax, Canada.",fullSizeUrl:"/assets/fluentCargo_ports.webp"}],picturePosition:"left"},{text:["[post-header](Metro Trains Melbourne | SEP 2018 - NOV 2020)","Metro Trains Melbourne needed a tool for monitoring real time voltages and currents for testing their new trains.","This work combined hardware installed in the field (created by my co-worker) and a server with a front end (created by me)","The hardware was made up of an industrial PC with a USB oscilloscope and 4G modem","My work included:","* Creating a backend in .Net Core that received the data.","* Creating the frontend for use on a PC or mobile, built using Typescript and React.","* Handling displaying live data of up to 120k samples on a mobile device.","* Storing, retrieving and processes all the data, which ranged between 40k samples per second to 120k samples per second.","* Utilising various Amazon Web Services such as EC2 to host the server, RDS to host the database for users and config, S3 for long term storage of raw data and SQS as a backup connection should the server go down."],pictures:[{url:"/assets/mtmGraphs_small.jpg",caption:"An example of live data from field units being displayed on a web UI."},{url:"/assets/mtmDataLookup_small.jpg",caption:"An example of the data lookup UI for retrieving old data."},{url:"/assets/mtmDataLookup2_small.jpg",caption:"An example of old data that has been looked up."}]},{text:["[post-header](Rome2rio | OCT 2014 - JUL 2018)","Rome2rio is a travel search website used for finding and comparing different routes from anywhere in the world. It specialised in ground transport.","I focused on adding timetables, buying tickets and working on internal tools for updating and creating routes live.","My work included:","* Adding schedule information and the ability to buy tickets directly through Rome2rio for UK trains.","* Internal tools for modifying their data through a web UI (not pictured).","* Expanding upon and improved the infrastructure of their tooling.","* For two years I mentored someone which resulted in them being able to shift from a non-dev role into a junior software dev."],pictures:[{url:"/assets/rome2rioTickets_small.png",caption:"An example of buying a train ticket in the UK directly with Rome2rio."},{url:"/assets/rome2rioSchedules.png",caption:"An example of a train timetable in Melbourne."}],picturePosition:"left"},{text:["[post-header](miGenius and mental images | JAN 2008 - OCT - 2014)","mental images are a company that specialises in photographic rendering using ray and path tracing software.","After 3 years the Melbourne office split off to form the company migenius which continued to do the same work and allowed for working on stand alone products.","Bloom Unit was their first product and combined the ease of using SketchUp's 3d editing with real time photographic images.","My work included:","* The interface between SketchUp (ruby) and Bloom Unit (C++) for keeping the 3d scene in sync.","* The UI (Internet Explorer 6) for adjusting the render settings and configuring the materials.","We also worked on other projects for various clients:","* Integrating Bloom Unit into Autodesk Revit for Oldcastle.","* Web visualisation projects for Obayashi Corporation and Shimizu Corporation.","* A product visualiser for Takemoto products. [link](Bottle 3d Visualiser | http://www3d1.takemotokk.co.jp/takemoto/?lang=en)","* A product visualiser for Christ Jewellery. [link](Ring Configurator | https://www.christ.de/)"],pictures:[{url:"/assets/bloomunit_small.jpg",caption:"A screenshot of SketchUp with Bloom Unit running."},{url:"/assets/takemoto_small.jpg",caption:"A screenshot of Takemoto's 3d Visualizer being used."},{url:"/assets/christRingConfigurator_small.jpg",caption:"A screenshot of Christ Ring Configurator being used."}]}]}]),selectedPageId:ea,darkTheme:!1,postsHeight:0,isMobile:!1,fluidEnabled:!0,documentReady:!1}),globalThis.__store=e;const en=globalThis.__state;void 0!=en&&e.execute(()=>en),"1"===window.localStorage.getItem("darkTheme")&&e.execute(u(!0)),"0"===window.localStorage.getItem("fluidEnabled")&&e.execute(c(!1)),ed()&&e.execute(h(!0));const el=new URL(document.location.toString()).searchParams.get("page");function eh(e){document.body.classList.toggle("dark-theme",e.darkTheme),(0,i.render)(/*#__PURE__*/(0,i.vdom)(et,{state:e}),document.body)}function ed(){return document.body.offsetWidth<=480}null!=el&&e.execute(d(el)),"complete"!==document.readyState?document.onreadystatechange=()=>{"complete"===document.readyState&&e.execute(m())}:e.execute(m()),eh(e.state()),e.subscribeAny(e=>{eh(e)}),e.subscribe(e=>e.darkTheme,(e,t)=>{window.localStorage.setItem("darkTheme",t?"1":"0")}),e.subscribe(e=>e.fluidEnabled,(e,t)=>{window.localStorage.setItem("fluidEnabled",t?"1":"0")}),window.addEventListener("resize",()=>{let t=ed();e.state().isMobile!==t&&e.execute(h(t))}),window.addEventListener("popstate",t=>{let i=t.state;i.pageId&&e.execute(d(i.pageId))});
//# sourceMappingURL=index.ba120a81.js.map
